---
import Button from "@/components/fundations/elements/Button.astro";
---

<!-- Format Switcher - Buttons for switching between Afternic, Spaceship, and Sedo -->
<div class="inline-flex gap-2" id="format-switcher">
  <button 
    id="format-btn-afternic" 
    class="format-btn px-3 py-1.5 text-sm font-medium rounded-md transition-colors cursor-pointer bg-teal-600 text-white"
    data-format="afternic"
  >
    Afternic
  </button>
  <button 
    id="format-btn-spaceship" 
    class="format-btn px-3 py-1.5 text-sm font-medium rounded-md transition-colors cursor-pointer bg-base-50 text-base-500 hover:bg-base-100"
    data-format="spaceship"
  >
    Spaceship
  </button>
  <button 
    id="format-btn-sedo" 
    class="format-btn px-3 py-1.5 text-sm font-medium rounded-md transition-colors cursor-pointer bg-base-50 text-base-500 hover:bg-base-100"
    data-format="sedo"
  >
    Sedo
  </button>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const formatBtns = document.querySelectorAll('.format-btn');
    let currentFormat = 'afternic';

    // Add click handlers to format buttons
    formatBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const target = e.target as HTMLElement;
        const format = target.dataset.format;
        if (format && format !== currentFormat) {
          switchToFormat(format);
        }
      });
    });

    // Listen for format switched events to update button states
    window.addEventListener('format-switched', (event: any) => {
      currentFormat = event.detail.format;
      updateButtonStates();
    });

    function switchToFormat(format: string) {
      // Request format switch from container
      window.dispatchEvent(new CustomEvent('format-switch-requested', { 
        detail: { format } 
      }));
    }

    function updateButtonStates() {
      formatBtns.forEach(btn => {
        const btnElement = btn as HTMLElement;
        const btnFormat = btnElement.dataset.format;
        
        if (btnFormat === currentFormat) {
          // Active state - green
          btnElement.className = 'format-btn px-3 py-1.5 text-sm font-medium rounded-md transition-colors cursor-pointer bg-teal-600 text-white';
        } else {
          // Inactive state - same gray as header columns
          btnElement.className = 'format-btn px-3 py-1.5 text-sm font-medium rounded-md transition-colors cursor-pointer bg-base-50 text-base-500 hover:bg-base-100';
        }
      });
    }

    // Initialize button states
    updateButtonStates();
  });
</script>