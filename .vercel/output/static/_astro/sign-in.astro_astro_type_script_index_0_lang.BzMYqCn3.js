import{a as I}from"./auth.HKnvu_IB.js";import"./supabase.EtSlLzdh.js";document.addEventListener("DOMContentLoaded",()=>{const u=document.getElementById("signin-form"),g=document.getElementById("email"),n=document.getElementById("message"),a=document.getElementById("success-message"),r=document.getElementById("error-message"),f=document.getElementById("error-text"),d=document.getElementById("button-text"),o=document.getElementById("button-loading"),h=document.getElementById("signin-button"),c=new URLSearchParams(window.location.search).get("error");c&&t(v(c)),u.addEventListener("submit",async e=>{e.preventDefault();const s=g.value.trim();if(!s){t("Please enter your email address.");return}if(!E(s)){t("Please enter a valid email address.");return}l(!0),y();try{const{data:i,error:m}=await I.signInWithEmail(s);if(m)throw m;L()}catch(i){console.error("Sign in error:",i),t(i.message||"Failed to send magic link. Please try again.")}finally{l(!1)}});function l(e){h.disabled=e,e?(d.classList.add("hidden"),o.classList.remove("hidden")):(d.classList.remove("hidden"),o.classList.add("hidden"))}function L(){n.classList.remove("hidden"),a.classList.remove("hidden"),r.classList.add("hidden")}function t(e){n.classList.remove("hidden"),r.classList.remove("hidden"),a.classList.add("hidden"),f.textContent=e}function y(){n.classList.add("hidden"),a.classList.add("hidden"),r.classList.add("hidden")}function E(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function v(e){switch(e){case"verification_failed":return"Email verification failed. Please try again.";case"no_session":return"No active session found. Please try signing in again.";case"unexpected":return"An unexpected error occurred. Please try again.";default:return"An error occurred. Please try again."}}});
