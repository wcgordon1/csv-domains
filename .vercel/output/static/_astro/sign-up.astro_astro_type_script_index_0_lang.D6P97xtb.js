import{a as v}from"./auth.HKnvu_IB.js";import"./supabase.EtSlLzdh.js";document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("signup-form"),u=document.getElementById("email"),g=document.getElementById("terms"),n=document.getElementById("message"),d=document.getElementById("success-message"),i=document.getElementById("error-message"),h=document.getElementById("error-text"),o=document.getElementById("button-text"),r=document.getElementById("button-loading"),L=document.getElementById("signup-button");l.addEventListener("submit",async e=>{e.preventDefault();const s=u.value.trim();if(!s){t("Please enter your email address.");return}if(!E(s)){t("Please enter a valid email address.");return}if(!g.checked){t("Please accept the Terms and Privacy Policy.");return}c(!0),f();try{const{data:a,error:m}=await v.signUpWithEmail(s);if(m)throw m;y()}catch(a){console.error("Sign up error:",a),t(a.message||"Failed to send magic link. Please try again.")}finally{c(!1)}});function c(e){L.disabled=e,e?(o.classList.add("hidden"),r.classList.remove("hidden")):(o.classList.remove("hidden"),r.classList.add("hidden"))}function y(){n.classList.remove("hidden"),d.classList.remove("hidden"),i.classList.add("hidden")}function t(e){n.classList.remove("hidden"),i.classList.remove("hidden"),d.classList.add("hidden"),h.textContent=e}function f(){n.classList.add("hidden"),d.classList.add("hidden"),i.classList.add("hidden")}function E(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}});
